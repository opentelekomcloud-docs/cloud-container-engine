:original_name: cce_10_0549.html

.. _cce_10_0549:

Pre-upgrade Check
=================

The system automatically checks a cluster before its upgrade. If the cluster does not meet the pre-upgrade check conditions, the upgrade cannot continue. To avoid risks, you can perform pre-upgrade check according to the check items and solutions described in this section.

.. table:: **Table 1** Check items

   +-----------------------+-----------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | No.                   | Check Item                                                                  | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
   +=======================+=============================================================================+==================================================================================================================================================================================================================================================================================================================================================================================================================================================================+
   | 1                     | :ref:`Node Restrictions <cce_10_0431>`                                      | -  Check whether the node is available.                                                                                                                                                                                                                                                                                                                                                                                                                          |
   |                       |                                                                             | -  Check whether the node OS supports the upgrade.                                                                                                                                                                                                                                                                                                                                                                                                               |
   |                       |                                                                             | -  Check whether the node is marked with unexpected node pool labels.                                                                                                                                                                                                                                                                                                                                                                                            |
   |                       |                                                                             | -  Check whether the Kubernetes node name is the same as the ECS name.                                                                                                                                                                                                                                                                                                                                                                                           |
   +-----------------------+-----------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | 2                     | :ref:`Upgrade Management <cce_10_0432>`                                     | Check whether the target cluster is under upgrade management.                                                                                                                                                                                                                                                                                                                                                                                                    |
   +-----------------------+-----------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | 3                     | :ref:`Add-ons <cce_10_0433>`                                                | -  Check whether the add-on status is normal.                                                                                                                                                                                                                                                                                                                                                                                                                    |
   |                       |                                                                             | -  Check whether the add-on supports the target version.                                                                                                                                                                                                                                                                                                                                                                                                         |
   +-----------------------+-----------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | 4                     | :ref:`Helm Charts <cce_10_0434>`                                            | Check whether the current HelmRelease record contains discarded Kubernetes APIs that are not supported by the target cluster version. If yes, the Helm chart may be unavailable after the upgrade.                                                                                                                                                                                                                                                               |
   +-----------------------+-----------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | 5                     | :ref:`Node Pools <cce_10_0436>`                                             | Check the node pool status.                                                                                                                                                                                                                                                                                                                                                                                                                                      |
   +-----------------------+-----------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | 6                     | :ref:`Security Groups <cce_10_0437>`                                        | Check whether the **Protocol & Port** of the worker node security groups is set to **ICMP: All** and whether the security group rule with the source IP address set to the master node security group has been deleted.                                                                                                                                                                                                                                          |
   +-----------------------+-----------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | 7                     | :ref:`Residual Nodes <cce_10_0439>`                                         | Check whether nodes need to be migrated.                                                                                                                                                                                                                                                                                                                                                                                                                         |
   +-----------------------+-----------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | 8                     | :ref:`Discarded Kubernetes Resources <cce_10_0440>`                         | Check whether there are discarded resources in the clusters.                                                                                                                                                                                                                                                                                                                                                                                                     |
   +-----------------------+-----------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | 9                     | :ref:`Compatibility Risks <cce_10_0441>`                                    | Read the version compatibility differences and ensure that they are not affected. The patch upgrade does not involve version compatibility differences.                                                                                                                                                                                                                                                                                                          |
   +-----------------------+-----------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | 10                    | :ref:`CCE Agent Versions <cce_10_0442>`                                     | Check whether cce-agent on the current node is of the latest version.                                                                                                                                                                                                                                                                                                                                                                                            |
   +-----------------------+-----------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | 11                    | :ref:`Node CPU Usage <cce_10_0443>`                                         | Check whether the node's CPU usage is above 90%.                                                                                                                                                                                                                                                                                                                                                                                                                 |
   +-----------------------+-----------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | 12                    | :ref:`Node Disks <cce_10_0445>`                                             | -  Check whether the key data disks on the node meet the upgrade requirements.                                                                                                                                                                                                                                                                                                                                                                                   |
   |                       |                                                                             | -  Check whether the **/tmp** directory has 500 MB of available space.                                                                                                                                                                                                                                                                                                                                                                                           |
   +-----------------------+-----------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | 13                    | :ref:`Node DNS <cce_10_0446>`                                               | -  Check whether the DNS configuration of the current node can resolve the OBS address.                                                                                                                                                                                                                                                                                                                                                                          |
   |                       |                                                                             | -  Check whether the current node can access the OBS address of the storage upgrade component package.                                                                                                                                                                                                                                                                                                                                                           |
   +-----------------------+-----------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | 14                    | :ref:`Node Key Directory File Permissions <cce_10_0447>`                    | Check whether the root directory permissions are properly assigned.                                                                                                                                                                                                                                                                                                                                                                                              |
   +-----------------------+-----------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | 15                    | :ref:`kubelet <cce_10_0448>`                                                | Check whether the kubelet on the node is running properly.                                                                                                                                                                                                                                                                                                                                                                                                       |
   +-----------------------+-----------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | 16                    | :ref:`Node Memory <cce_10_0449>`                                            | Check whether the node's memory usage is above 90%.                                                                                                                                                                                                                                                                                                                                                                                                              |
   +-----------------------+-----------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | 17                    | :ref:`Node Clock Synchronization Server <cce_10_0450>`                      | Check whether the clock synchronization server ntpd or chronyd of the node is running properly.                                                                                                                                                                                                                                                                                                                                                                  |
   +-----------------------+-----------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | 18                    | :ref:`Node OS <cce_10_0451>`                                                | Check whether the OS kernel version of the node is supported by CCE.                                                                                                                                                                                                                                                                                                                                                                                             |
   +-----------------------+-----------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | 19                    | :ref:`Node CPU Cores <cce_10_0452>`                                         | Verify that the master nodes in your cluster have more than 2 CPU cores.                                                                                                                                                                                                                                                                                                                                                                                         |
   +-----------------------+-----------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | 20                    | :ref:`Node Readiness <cce_10_0455>`                                         | Check whether the nodes in the cluster are ready.                                                                                                                                                                                                                                                                                                                                                                                                                |
   +-----------------------+-----------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | 21                    | :ref:`Node journald <cce_10_0456>`                                          | Check whether journald of a node is normal.                                                                                                                                                                                                                                                                                                                                                                                                                      |
   +-----------------------+-----------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | 22                    | :ref:`containerd.sock <cce_10_0457>`                                        | Check whether the **containerd.sock** file is on the node. This file affects the startup of container runtime in EulerOS.                                                                                                                                                                                                                                                                                                                                        |
   +-----------------------+-----------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | 23                    | :ref:`Internal Error <cce_10_0458>`                                         | This check item is not typical and implies that an internal error was found during the pre-upgrade check.                                                                                                                                                                                                                                                                                                                                                        |
   +-----------------------+-----------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | 24                    | :ref:`Node Mount Points <cce_10_0459>`                                      | Check whether there are inaccessible mount points on the node.                                                                                                                                                                                                                                                                                                                                                                                                   |
   +-----------------------+-----------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | 25                    | :ref:`Kubernetes Node Taint <cce_10_0460>`                                  | Check whether the taint needed for cluster upgrade exists on the node.                                                                                                                                                                                                                                                                                                                                                                                           |
   +-----------------------+-----------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | 26                    | :ref:`Everest Restrictions <cce_10_0478>`                                   | Check whether there are any compatibility restrictions on the current Everest add-on.                                                                                                                                                                                                                                                                                                                                                                            |
   +-----------------------+-----------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | 27                    | :ref:`cce-hpa-controller Limitations <cce_10_0479>`                         | Check whether there are compatibility limitations between the current and target cce-controller-hpa add-on versions.                                                                                                                                                                                                                                                                                                                                             |
   +-----------------------+-----------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | 28                    | :ref:`Enhanced CPU Policies <cce_10_0480>`                                  | Check whether the current cluster version and the target version support enhanced CPU policy.                                                                                                                                                                                                                                                                                                                                                                    |
   +-----------------------+-----------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | 29                    | :ref:`Health of Worker Node Components <cce_10_0484>`                       | Check whether the container runtime and network components on the worker nodes are healthy.                                                                                                                                                                                                                                                                                                                                                                      |
   +-----------------------+-----------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | 30                    | :ref:`Health of Master Node Components <cce_10_0485>`                       | Check whether cluster components such as Kubernetes components, container runtime component, and network component are running properly before the upgrade.                                                                                                                                                                                                                                                                                                      |
   +-----------------------+-----------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | 31                    | :ref:`Memory Resource Limit of Kubernetes Components <cce_10_0486>`         | Check whether the resources of Kubernetes components, such as etcd and kube-controller-manager, exceed the limits.                                                                                                                                                                                                                                                                                                                                               |
   +-----------------------+-----------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | 32                    | :ref:`Discarded Kubernetes APIs <cce_10_0487>`                              | The system scans the audit logs of the past day to check whether the user calls the deprecated APIs of the target Kubernetes version.                                                                                                                                                                                                                                                                                                                            |
   |                       |                                                                             |                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
   |                       |                                                                             | .. note::                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
   |                       |                                                                             |                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
   |                       |                                                                             |    Due to the limited time range of audit logs, this check item is only an auxiliary method. APIs to be deprecated may have been used in the cluster, but their usage is not included in the audit logs of the past day. Check the API usage carefully.                                                                                                                                                                                                          |
   +-----------------------+-----------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | 33                    | :ref:`IPv6 Support in CCE Turbo Clusters <cce_10_0488>`                     | If IPv6 is enabled for a CCE Turbo cluster, check whether the target cluster version supports IPv6.                                                                                                                                                                                                                                                                                                                                                              |
   +-----------------------+-----------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | 34                    | :ref:`NetworkManager <cce_10_0489>`                                         | Check whether NetworkManager of a node is normal.                                                                                                                                                                                                                                                                                                                                                                                                                |
   +-----------------------+-----------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | 35                    | :ref:`Node ID File <cce_10_0490>`                                           | Check the ID file format.                                                                                                                                                                                                                                                                                                                                                                                                                                        |
   +-----------------------+-----------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | 36                    | :ref:`Node Configuration Consistency <cce_10_0491>`                         | When you upgrade a cluster to v1.19 or later, CCE checks whether the following configuration files have been modified on the backend:                                                                                                                                                                                                                                                                                                                            |
   +-----------------------+-----------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | 37                    | :ref:`Node Configuration File <cce_10_0492>`                                | Check whether the configuration files of key components exist on the node.                                                                                                                                                                                                                                                                                                                                                                                       |
   +-----------------------+-----------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | 38                    | :ref:`CoreDNS Configuration Consistency <cce_10_0493>`                      | Check whether the current CoreDNS key configuration Corefile is different from that in the Helm release record. The difference may be overwritten during the add-on upgrade, **affecting domain name resolution in the cluster**.                                                                                                                                                                                                                                |
   +-----------------------+-----------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | 39                    | :ref:`sudo <cce_10_0494>`                                                   | Check whether the sudo command and sudo-related files of the node are working.                                                                                                                                                                                                                                                                                                                                                                                   |
   +-----------------------+-----------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | 40                    | :ref:`Key Node Commands <cce_10_0495>`                                      | Whether some key commands that the node upgrade depends on are working                                                                                                                                                                                                                                                                                                                                                                                           |
   +-----------------------+-----------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | 41                    | :ref:`Mounting of a Sock File on a Node <cce_10_0496>`                      | Check whether the **docker/containerd.sock** file is directly mounted to the pods on a node. During an upgrade, Docker or containerd restarts and the sock file on the host changes, but the sock file mounted to pods does not change accordingly. As a result, your services cannot access Docker or containerd due to sock file inconsistency. After the pods are rebuilt, the sock file is mounted to the pods again, and the issue is resolved accordingly. |
   +-----------------------+-----------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | 42                    | :ref:`HTTPS Load Balancer Certificate Consistency <cce_10_0497>`            | Check whether the certificate used by an HTTPS load balancer has been modified on ELB.                                                                                                                                                                                                                                                                                                                                                                           |
   +-----------------------+-----------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | 43                    | :ref:`Node Mounting <cce_10_0498>`                                          | This section describes how to diagnose and fix mounting failures caused by CCE storage misconfigurations.                                                                                                                                                                                                                                                                                                                                                        |
   +-----------------------+-----------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | 44                    | :ref:`Login Permissions of User paas on a Node <cce_10_0499>`               | Check whether user **paas** is allowed to log in to a node.                                                                                                                                                                                                                                                                                                                                                                                                      |
   +-----------------------+-----------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | 45                    | :ref:`Private IPv4 Addresses of Load Balancers <cce_10_0500>`               | Check whether the load balancer associated with a Service is allocated with a private IPv4 address.                                                                                                                                                                                                                                                                                                                                                              |
   +-----------------------+-----------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | 46                    | :ref:`Historical Upgrade Records <cce_10_0501>`                             | Check the historical upgrade records of the cluster and confirm that the current version of the cluster meets the requirements for upgrading to the target version.                                                                                                                                                                                                                                                                                              |
   +-----------------------+-----------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | 47                    | :ref:`CIDR Block of the Cluster Management Plane <cce_10_0502>`             | Check whether the CIDR block of the cluster management plane is the same as that configured on the backbone network.                                                                                                                                                                                                                                                                                                                                             |
   +-----------------------+-----------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | 48                    | :ref:`CCE AI Suite (NVIDIA GPU) Exceptions <cce_10_0503>`                   | Check whether CCE AI Suite (NVIDIA GPU) involved in the upgrade affects the GPU driver installation when creating a GPU node.                                                                                                                                                                                                                                                                                                                                    |
   +-----------------------+-----------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | 49                    | :ref:`Nodes' System Parameters <cce_10_0504>`                               | Check whether the default system parameter settings on your nodes are modified.                                                                                                                                                                                                                                                                                                                                                                                  |
   +-----------------------+-----------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | 50                    | :ref:`Residual Package Version Data <cce_10_0505>`                          | Check whether there is residual package version data in the current cluster.                                                                                                                                                                                                                                                                                                                                                                                     |
   +-----------------------+-----------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | 51                    | :ref:`Node Commands <cce_10_0506>`                                          | Check whether the commands required for the upgrade are available on the node.                                                                                                                                                                                                                                                                                                                                                                                   |
   +-----------------------+-----------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | 52                    | :ref:`Node Swap <cce_10_0507>`                                              | Check whether swap has been enabled on cluster nodes.                                                                                                                                                                                                                                                                                                                                                                                                            |
   +-----------------------+-----------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | 53                    | :ref:`NGINX Ingress Controller <cce_10_0508>`                               | Check whether there are compatibility issues that may occur during NGINX Ingress Controller upgrade.                                                                                                                                                                                                                                                                                                                                                             |
   +-----------------------+-----------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | 54                    | :ref:`containerd Pod Restart Risks <cce_10_0510>`                           | Check whether the service pods running on a containerd node are restarted when containerd is upgraded.                                                                                                                                                                                                                                                                                                                                                           |
   +-----------------------+-----------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | 55                    | :ref:`Key CCE AI Suite (NVIDIA GPU) Parameters <cce_10_0511>`               | Check whether the configuration of CCE AI Suite (NVIDIA GPU) in a cluster has been intrusively modified. If so, upgrading the cluster may fail.                                                                                                                                                                                                                                                                                                                  |
   +-----------------------+-----------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | 56                    | :ref:`GPU Pod Rebuild Risks <cce_10_0512>`                                  | Check whether GPU service pods are rebuilt in a cluster when kubelet is restarted during the upgrade of the cluster.                                                                                                                                                                                                                                                                                                                                             |
   +-----------------------+-----------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | 57                    | :ref:`ELB Listener Access Control <cce_10_0513>`                            | If so, check whether the configurations are correct.                                                                                                                                                                                                                                                                                                                                                                                                             |
   +-----------------------+-----------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | 58                    | :ref:`Subnet Quota of Master Nodes <cce_10_0515>`                           | Check whether the number of available IP addresses in the cluster subnet supports rolling upgrade.                                                                                                                                                                                                                                                                                                                                                               |
   +-----------------------+-----------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | 59                    | :ref:`Node Runtime <cce_10_0516>`                                           | Check whether an alarm is generated when a cluster is upgraded to v1.27 or later. Do not use Docker in clusters of versions later than 1.27.                                                                                                                                                                                                                                                                                                                     |
   +-----------------------+-----------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | 60                    | :ref:`Node Pool Runtime <cce_10_0517>`                                      | Check whether an alarm is generated when a cluster is upgraded to v1.27 or later. Do not use Docker in clusters of versions later than 1.27.                                                                                                                                                                                                                                                                                                                     |
   +-----------------------+-----------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | 61                    | :ref:`Number of Node Images <cce_10_0518>`                                  | Check the number of images on your node. If there are more than 1000 images, it takes a long time for Docker to start, affecting the standard Docker output and functions such as Nginx.                                                                                                                                                                                                                                                                         |
   +-----------------------+-----------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | 62                    | :ref:`Compatibility Check of At-Rest Encryption for Secrets <cce_10_0520>`  | Check whether the target version supports at-rest encryption for secrets. If it does not, clusters that have this feature enabled cannot be upgraded to the target version.                                                                                                                                                                                                                                                                                      |
   +-----------------------+-----------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | 63                    | :ref:`Compatibility Between the Ubuntu Kernel and GPU Driver <cce_10_0521>` | Make sure that CCE AI Suite (NVIDIA GPU) and Ubuntu nodes are compatible before using them in a cluster. If the Ubuntu kernel is 5.15.0-113-generic, the driver of the GPU add-on must be 535.161.08 or later.                                                                                                                                                                                                                                                   |
   +-----------------------+-----------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | 64                    | :ref:`Drainage Tasks <cce_10_0522>`                                         | An unfinished drainage task is detected in the cluster, which may resume after the upgrade. If this happens, running pods will be evicted, which could impact your services.                                                                                                                                                                                                                                                                                     |
   +-----------------------+-----------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | 65                    | :ref:`Image Layers on a Node <cce_10_0523>`                                 | Check the number of image layers on your node. If there are more than 5000 layers, it will take a long time for Docker or containerd to start, affecting the stdout of Docker or containerd.                                                                                                                                                                                                                                                                     |
   +-----------------------+-----------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | 66                    | :ref:`Cluster Rolling Upgrade <cce_10_0524>`                                | Check whether your cluster is eligible for a rolling upgrade. The check results show that the rolling upgrade is not supported.                                                                                                                                                                                                                                                                                                                                  |
   +-----------------------+-----------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | 67                    | :ref:`Rotation Certificates <cce_10_0525>`                                  | Check whether the number of certificates on your node is greater than 1000. During an upgrade, certificate files will be processed in batches. An excessive number of certificate files will lead to a slow node upgrade and result in pod eviction from the node.                                                                                                                                                                                               |
   +-----------------------+-----------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | 68                    | :ref:`Ingress and ELB Configuration Consistency <cce_10_0526>`              | Check whether any modifications have been made on the ELB console to the listener, forwarding policy, forwarding rule, backend server group, backend cloud server, or certificate configurations that were automatically generated for the ingress.                                                                                                                                                                                                              |
   +-----------------------+-----------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | 69                    | :ref:`Network Policies of Cluster Network Components <cce_10_0527>`         | Check the network policy settings on the master nodes in your cluster. If any manual modifications have been made, they will be reset during the upgrade.                                                                                                                                                                                                                                                                                                        |
   +-----------------------+-----------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | 70                    | :ref:`Cluster and Node Pool Configurations <cce_10_0528>`                   | Check whether the **nic-max-above-warm-target** value configured for the network component of the current cluster exceeds the maximum value allowed.                                                                                                                                                                                                                                                                                                             |
   +-----------------------+-----------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | 71                    | :ref:`Time Zone of Master Nodes <cce_10_0529>`                              | Check whether the time zone of the master nodes matches the cluster's time zone. If they are different, the master nodes will be updated to match the cluster's time zone during a rolling upgrade.                                                                                                                                                                                                                                                              |
   +-----------------------+-----------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | 72                    | :ref:`SNATIPRanges <cce_10_0530>`                                           | Check whether the **SNATIPRanges** value has changed after the upgrade. This check is available only for CCE Turbo clusters.                                                                                                                                                                                                                                                                                                                                     |
   +-----------------------+-----------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | 73                    | :ref:`Add-on Configuration Consistency <cce_10_0531>`                       | Manual modifications to add-on configuration parameters (typically ConfigMaps), instead of modifications through the CCE console or add-on API updates, may be overwritten after an upgrade, potentially affecting service operation.                                                                                                                                                                                                                            |
   +-----------------------+-----------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
