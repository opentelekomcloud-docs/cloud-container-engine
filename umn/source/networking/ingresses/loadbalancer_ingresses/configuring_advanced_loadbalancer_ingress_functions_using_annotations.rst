:original_name: cce_10_0695.html

.. _cce_10_0695:

Configuring Advanced LoadBalancer Ingress Functions Using Annotations
=====================================================================

You can add annotations to a YAML file for more advanced ingress functions. This section describes the annotations that can be used when you create a LoadBalancer ingress.

Indexes
-------

+------------------------------------+-------------------------------------------------------------------------------------------------+
| Category                           | Ingress Annotation                                                                              |
+====================================+=================================================================================================+
| Load balancer configuration        | -  :ref:`Basic Configurations for Interconnecting with ELB <cce_10_0695__section7819047102916>` |
|                                    | -  :ref:`Adding Resource Tags <cce_10_0695__section69813919596>`                                |
|                                    | -  :ref:`Configuring a Custom EIP <cce_10_0695__section18596171162010>`                         |
+------------------------------------+-------------------------------------------------------------------------------------------------+
| Port or protocol configuration     | -  :ref:`Configuring ELB Certificates <cce_10_0695__section147821053798>`                       |
|                                    | -  :ref:`Using HTTP/2 <cce_10_0695__section17893312104519>`                                     |
|                                    | -  :ref:`Interconnecting with HTTPS Backend Services <cce_10_0695__section03391948464>`         |
|                                    | -  :ref:`Configuring a Range of Listening Ports <cce_10_0695__section1131753918347>`            |
+------------------------------------+-------------------------------------------------------------------------------------------------+
| Advanced features of ELB listeners | -  :ref:`Configuring Timeout for an Ingress <cce_10_0695__section2481237579>`                   |
|                                    | -  :ref:`Configuring a Slow Start <cce_10_0695__section24243015135>`                            |
|                                    | -  :ref:`Blocklist/Trustlist <cce_10_0695__section79480421873>`                                 |
+------------------------------------+-------------------------------------------------------------------------------------------------+
| Forwarding policy                  | -  :ref:`Configuring the Priorities of Forwarding Rules <cce_10_0695__section33791154163610>`   |
|                                    | -  :ref:`Configuring a Custom Header Forwarding Policy <cce_10_0695__section1175174213597>`     |
|                                    | -  :ref:`Configuring Advanced Forwarding Rules <cce_10_0695__section18681184812916>`            |
|                                    | -  :ref:`Configuring Advanced Forwarding Actions <cce_10_0695__section19158739164117>`          |
+------------------------------------+-------------------------------------------------------------------------------------------------+

.. important::

   In a cluster, multiple ingresses can share a listener, allowing them to use the same port on a single load balancer. If two ingresses have different listener configurations, the listener configuration of the earlier ingress (known as the first route) will be used.

   This case involves the following scenarios:

   -  :ref:`Configuring ELB Certificates <cce_10_0695__section147821053798>`
   -  :ref:`Using HTTP/2 <cce_10_0695__section17893312104519>`
   -  :ref:`Configuring Timeout for an Ingress <cce_10_0695__section2481237579>`
   -  :ref:`Blocklist/Trustlist <cce_10_0695__section79480421873>`

   Ensure that the configurations of different listeners for various ingresses are synchronized.

.. _cce_10_0695__section7819047102916:

Basic Configurations for Interconnecting with ELB
-------------------------------------------------

Application scenarios and use cases:

-  Associate an existing load balancer. For details, see :ref:`Associating an Existing Load Balancer to an Ingress While Creating the Ingress <cce_10_0252__section32300431736>`.
-  Automatically create a load balancer. For details, see :ref:`Automatically Creating a Load Balancer While Creating an Ingress <cce_10_0252__section3675115714214>`.

.. table:: **Table 1** Annotations for interconnecting with ELB

   +------------------------------+------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------+
   | Parameter                    | Type                                                       | Description                                                                                                                                                                                                                                                                                                                                           | Supported Cluster Version                                   |
   +==============================+============================================================+=======================================================================================================================================================================================================================================================================================================================================================+=============================================================+
   | kubernetes.io/elb.class      | String                                                     | Select a proper load balancer type. **This parameter cannot be modified after the ingress is created.**                                                                                                                                                                                                                                               | v1.9 or later                                               |
   |                              |                                                            |                                                                                                                                                                                                                                                                                                                                                       |                                                             |
   |                              |                                                            | -  **union**: shared load balancer                                                                                                                                                                                                                                                                                                                    |                                                             |
   |                              |                                                            | -  **performance**: dedicated load balancer, which can be used only in clusters of v1.17 and later.                                                                                                                                                                                                                                                   |                                                             |
   +------------------------------+------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------+
   | kubernetes.io/ingress.class  | String                                                     | -  **cce**: A proprietary LoadBalancer ingress is used.                                                                                                                                                                                                                                                                                               | Only clusters of v1.21 or earlier                           |
   |                              |                                                            |                                                                                                                                                                                                                                                                                                                                                       |                                                             |
   |                              |                                                            | -  **nginx**: indicates that Nginx Ingress is used. This option is available only after NGINX Ingress Controller is installed. For details, see :ref:`Creating an Nginx Ingress Using kubectl <cce_10_0364>`.                                                                                                                                         |                                                             |
   |                              |                                                            |                                                                                                                                                                                                                                                                                                                                                       |                                                             |
   |                              |                                                            |    Multiple NGINX Ingress Controller add-ons can be installed in a single cluster if the add-on version is 2.5.4 or later. In this case, the value of this parameter must be the :ref:`controller name <cce_10_0034__li0953175016455>` customized during controller installation, indicating that the ingress is managed by that specific controller. |                                                             |
   |                              |                                                            |                                                                                                                                                                                                                                                                                                                                                       |                                                             |
   |                              |                                                            | This parameter is mandatory when you create an ingress. The default value is **cce**.                                                                                                                                                                                                                                                                 |                                                             |
   |                              |                                                            |                                                                                                                                                                                                                                                                                                                                                       |                                                             |
   |                              |                                                            | For clusters of v1.23 or later, use the parameter **ingressClassName**. For details, see :ref:`Creating a LoadBalancer Ingress Using kubectl <cce_10_0252>`.                                                                                                                                                                                          |                                                             |
   +------------------------------+------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------+
   | kubernetes.io/elb.port       | String                                                     | This parameter indicates the external port registered with the address of the LoadBalancer Service.                                                                                                                                                                                                                                                   | v1.9 or later                                               |
   |                              |                                                            |                                                                                                                                                                                                                                                                                                                                                       |                                                             |
   |                              |                                                            | The value ranges from **1** to **65535**. The default value is **80** for HTTP and **443** for HTTPS.                                                                                                                                                                                                                                                 |                                                             |
   |                              |                                                            |                                                                                                                                                                                                                                                                                                                                                       |                                                             |
   |                              |                                                            | .. note::                                                                                                                                                                                                                                                                                                                                             |                                                             |
   |                              |                                                            |                                                                                                                                                                                                                                                                                                                                                       |                                                             |
   |                              |                                                            |    Some ports on a shared load balancer are highly risky and blocked by default, for example, port 21.                                                                                                                                                                                                                                                |                                                             |
   +------------------------------+------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------+
   | kubernetes.io/elb.id         | String                                                     | **When associating only existing load balancers**, you can use either this parameter or **kubernetes.io/elb.ip**. If they conflict, **kubernetes.io/elb.id** will take precedence. **This parameter cannot be modified after the ingress is created.**                                                                                                | v1.9 or later                                               |
   |                              |                                                            |                                                                                                                                                                                                                                                                                                                                                       |                                                             |
   |                              |                                                            | This parameter indicates the ID of a load balancer.                                                                                                                                                                                                                                                                                                   |                                                             |
   |                              |                                                            |                                                                                                                                                                                                                                                                                                                                                       |                                                             |
   |                              |                                                            | **How to obtain**:                                                                                                                                                                                                                                                                                                                                    |                                                             |
   |                              |                                                            |                                                                                                                                                                                                                                                                                                                                                       |                                                             |
   |                              |                                                            | Log in to the ELB console and click the load balancer name. On the **Summary** tab of the load balancer details page, find the **ID** field and copy it.                                                                                                                                                                                              |                                                             |
   +------------------------------+------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------+
   | kubernetes.io/elb.ip         | String                                                     | **When associating only existing load balancers**, you can use either this parameter or **kubernetes.io/elb.id**. If they conflict, **kubernetes.io/elb.id** will take precedence. **This parameter cannot be modified after the ingress is created.**                                                                                                | v1.9 or later                                               |
   |                              |                                                            |                                                                                                                                                                                                                                                                                                                                                       |                                                             |
   |                              |                                                            | This parameter indicates the IP address of a load balancer.                                                                                                                                                                                                                                                                                           |                                                             |
   |                              |                                                            |                                                                                                                                                                                                                                                                                                                                                       |                                                             |
   |                              |                                                            | When creating an ingress, specify a public or private IP address for a shared load balancer. For a dedicated load balancer, only a private IP address can be specified.                                                                                                                                                                               |                                                             |
   +------------------------------+------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------+
   | kubernetes.io/elb.autocreate | :ref:`Table 15 <cce_10_0695__table148341447193017>` object | Mandatory **when load balancers are automatically created**. **This parameter cannot be modified after the ingress is created.**                                                                                                                                                                                                                      | v1.9 or later                                               |
   |                              |                                                            |                                                                                                                                                                                                                                                                                                                                                       |                                                             |
   |                              |                                                            | **Example**:                                                                                                                                                                                                                                                                                                                                          |                                                             |
   |                              |                                                            |                                                                                                                                                                                                                                                                                                                                                       |                                                             |
   |                              |                                                            | -  Automatically created dedicated load balancer with an EIP bound:                                                                                                                                                                                                                                                                                   |                                                             |
   |                              |                                                            |                                                                                                                                                                                                                                                                                                                                                       |                                                             |
   |                              |                                                            |    '{"type":"public","bandwidth_name":"cce-bandwidth-1741230802502","bandwidth_chargemode":"traffic","bandwidth_size":5,"bandwidth_sharetype":"PER","eip_type":"5_bgp","available_zone":["``*****``"],"elb_virsubnet_ids":["``*****``"],"l7_flavor_name":"L7_flavor.elb.pro.max","l4_flavor_name":"","vip_subnet_cidr_id":"``*****``"}'               |                                                             |
   |                              |                                                            |                                                                                                                                                                                                                                                                                                                                                       |                                                             |
   |                              |                                                            | -  Automatically created dedicated load balancer with no EIP bound:                                                                                                                                                                                                                                                                                   |                                                             |
   |                              |                                                            |                                                                                                                                                                                                                                                                                                                                                       |                                                             |
   |                              |                                                            |    '{"type":"inner","available_zone":["``*****``"],"elb_virsubnet_ids":["``*****``"],"l7_flavor_name":"L7_flavor.elb.pro.max","l4_flavor_name":"","vip_subnet_cidr_id":"``*****``"}'                                                                                                                                                                  |                                                             |
   |                              |                                                            |                                                                                                                                                                                                                                                                                                                                                       |                                                             |
   |                              |                                                            | -  Automatically created shared load balancer with an EIP bound:                                                                                                                                                                                                                                                                                      |                                                             |
   |                              |                                                            |                                                                                                                                                                                                                                                                                                                                                       |                                                             |
   |                              |                                                            |    '{"type":"public","bandwidth_name":"cce-bandwidth-1551163379627","bandwidth_chargemode":"traffic,"bandwidth_size":5,"bandwidth_sharetype":"PER","eip_type":"5_bgp","name":"james"}'                                                                                                                                                                |                                                             |
   |                              |                                                            |                                                                                                                                                                                                                                                                                                                                                       |                                                             |
   |                              |                                                            | -  Automatically created shared load balancer with no EIP bound:                                                                                                                                                                                                                                                                                      |                                                             |
   |                              |                                                            |                                                                                                                                                                                                                                                                                                                                                       |                                                             |
   |                              |                                                            |    '{"type":"inner", "name": "A-location-d-test"}'                                                                                                                                                                                                                                                                                                    |                                                             |
   +------------------------------+------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------+
   | kubernetes.io/elb.subnet-id  | String                                                     | Optional **when load balancers are automatically created**.                                                                                                                                                                                                                                                                                           | Mandatory for clusters of a version earlier than v1.11.7-r0 |
   |                              |                                                            |                                                                                                                                                                                                                                                                                                                                                       |                                                             |
   |                              |                                                            | ID of the subnet where the cluster is located. The value can contain 1 to 100 characters.                                                                                                                                                                                                                                                             | Discarded in clusters of a version later than v1.11.7-r0    |
   |                              |                                                            |                                                                                                                                                                                                                                                                                                                                                       |                                                             |
   |                              |                                                            | -  Mandatory when a cluster of v1.11.7-r0 or earlier is to be automatically created.                                                                                                                                                                                                                                                                  |                                                             |
   |                              |                                                            | -  Optional for clusters of a version later than v1.11.7-r0.                                                                                                                                                                                                                                                                                          |                                                             |
   +------------------------------+------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------+

.. _cce_10_0695__section69813919596:

Adding Resource Tags
--------------------

For details about application scenarios and use cases, see :ref:`Automatically Creating a Load Balancer While Creating an Ingress <cce_10_0252__section3675115714214>`.

.. table:: **Table 2** Annotations

   +------------------------+-----------------+----------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------+
   | Parameter              | Type            | Description                                                                                                                | Supported Cluster Version                     |
   +========================+=================+============================================================================================================================+===============================================+
   | kubernetes.io/elb.tags | String          | Add resource tags to a load balancer. This parameter can be configured only when a load balancer is automatically created. | v1.23.11-r0, v1.25.6-r0, v1.27.3-r0, or later |
   |                        |                 |                                                                                                                            |                                               |
   |                        |                 | A tag is in the format of "key=value". Use commas (,) to separate multiple tags.                                           |                                               |
   +------------------------+-----------------+----------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------+

.. _cce_10_0695__section18596171162010:

Configuring a Custom EIP
------------------------

For details about application scenarios and use cases, see :ref:`Configuring a Custom EIP for a LoadBalancer Ingress <cce_10_0925>`.

.. table:: **Table 3** Annotations of custom EIP configurations

   +---------------------------------+-----------------+-------------------------------------------------------------+-------------------------------------------------------------------------------------+
   | Parameter                       | Type            | Description                                                 | Supported Cluster Version                                                           |
   +=================================+=================+=============================================================+=====================================================================================+
   | kubernetes.io/elb.custom-eip-id | String          | ID of the custom EIP, which can be seen on the EIP console. | v1.23.18-r0, v1.25.13-r0, v1.27.10-r0, v1.28.8-r0, v1.29.4-r0, v1.30.1-r0, or later |
   |                                 |                 |                                                             |                                                                                     |
   |                                 |                 | The EIP must be bindable.                                   |                                                                                     |
   +---------------------------------+-----------------+-------------------------------------------------------------+-------------------------------------------------------------------------------------+

.. _cce_10_0695__section147821053798:

Configuring ELB Certificates
----------------------------

For details about application scenarios and use cases, see :ref:`Configuring an HTTPS Certificate for a LoadBalancer Ingress <cce_10_0687>`.

.. table:: **Table 4** ELB certificate annotations

   +---------------------------------------+-----------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------+
   | Parameter                             | Type            | Description                                                                                                                                                                                                                                | Supported Cluster Version                     |
   +=======================================+=================+============================================================================================================================================================================================================================================+===============================================+
   | kubernetes.io/elb.tls-certificate-ids | String          | ELB certificate IDs, which are separated by comma (,). The list length is greater than or equal to 1. The first ID in the list is the server certificate, and the other IDs are SNI certificates in which a domain name must be contained. | v1.19.16-r2, v1.21.5-r0, v1.23.3-r0, or later |
   |                                       |                 |                                                                                                                                                                                                                                            |                                               |
   |                                       |                 | How to obtain: Log in to the ELB console and choose **Certificates**. In the load balancer list, copy the ID under the target certificate name.                                                                                            |                                               |
   +---------------------------------------+-----------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------+
   | kubernetes.io/elb.tls-ciphers-policy  | String          | The default value is **tls-1-2**, which is the default security policy used by the listener and takes effect only when HTTPS is used.                                                                                                      | Clusters of v1.17.17 or later                 |
   |                                       |                 |                                                                                                                                                                                                                                            |                                               |
   |                                       |                 | Options:                                                                                                                                                                                                                                   |                                               |
   |                                       |                 |                                                                                                                                                                                                                                            |                                               |
   |                                       |                 | -  **tls-1-0**                                                                                                                                                                                                                             |                                               |
   |                                       |                 | -  **tls-1-1**                                                                                                                                                                                                                             |                                               |
   |                                       |                 | -  **tls-1-2**                                                                                                                                                                                                                             |                                               |
   |                                       |                 | -  **tls-1-2-strict**                                                                                                                                                                                                                      |                                               |
   |                                       |                 | -  **tls-1-0-with-1-3** (dedicated load balancer)                                                                                                                                                                                          |                                               |
   |                                       |                 | -  **tls-1-2-fs** (dedicated load balancer)                                                                                                                                                                                                |                                               |
   |                                       |                 | -  **tls-1-2-fs-with-1-3** (dedicated load balancer)                                                                                                                                                                                       |                                               |
   |                                       |                 |                                                                                                                                                                                                                                            |                                               |
   |                                       |                 | For details of cipher suites for each security policy, see :ref:`Table 3 <cce_10_0687__table9419191416246>`.                                                                                                                               |                                               |
   +---------------------------------------+-----------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------+
   | kubernetes.io/elb.security_policy_id  | String          | The ID of the custom security group policy on ELB. Obtain it on the ELB console. This field takes effect only when HTTPS is used and has a higher priority than the default security policy.                                               | Clusters of v1.17.17 or later                 |
   +---------------------------------------+-----------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------+

.. _cce_10_0695__section17893312104519:

Using HTTP/2
------------

For details about application scenarios and use cases, see :ref:`Configuring HTTP/2 for a LoadBalancer Ingress <cce_10_0694>`.

.. table:: **Table 5** Annotations for using HTTP/2

   +--------------------------------+-----------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------+
   | Parameter                      | Type            | Description                                                                                                                                                                                                                          | Supported Cluster Version                                 |
   +================================+=================+======================================================================================================================================================================================================================================+===========================================================+
   | kubernetes.io/elb.http2-enable | String          | Whether HTTP/2 is enabled. Request forwarding using HTTP/2 improves the access performance between your application and the load balancer. However, the load balancer still uses HTTP/1.x to forward requests to the backend server. | v1.23.13-r0, v1.25.8-r0, v1.27.5-r0, v1.28.3-r0, or later |
   |                                |                 |                                                                                                                                                                                                                                      |                                                           |
   |                                |                 | Options:                                                                                                                                                                                                                             |                                                           |
   |                                |                 |                                                                                                                                                                                                                                      |                                                           |
   |                                |                 | -  **true**: enabled                                                                                                                                                                                                                 |                                                           |
   |                                |                 | -  **false**: disabled (default value)                                                                                                                                                                                               |                                                           |
   |                                |                 |                                                                                                                                                                                                                                      |                                                           |
   |                                |                 | Note: **HTTP/2 can be enabled or disabled only when the listener uses HTTPS.** This parameter is invalid and defaults to **false** when the listener protocol is HTTP.                                                               |                                                           |
   +--------------------------------+-----------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------+

.. _cce_10_0695__section03391948464:

Interconnecting with HTTPS Backend Services
-------------------------------------------

For details about application scenarios and use cases, see :ref:`Configuring HTTPS Backend Services for a LoadBalancer Ingress <cce_10_0691>`.

.. table:: **Table 6** Annotations for interconnecting with HTTPS backend services

   +---------------------------------+--------+-------------------------------------------------------------------------------+----------------------------+
   | Parameter                       | Type   | Description                                                                   | Supported Cluster Version  |
   +=================================+========+===============================================================================+============================+
   | kubernetes.io/elb.pool-protocol | String | To interconnect with HTTPS backend services, set this parameter to **https**. | v1.23.8, v1.25.3, or later |
   +---------------------------------+--------+-------------------------------------------------------------------------------+----------------------------+

.. _cce_10_0695__section1131753918347:

Configuring a Range of Listening Ports
--------------------------------------

A custom listening port can be configured for an ingress. In this way, both ports 80 and 443 can be exposed.

For details about application scenarios and use cases, see :ref:`Configuring a Range of Listening Ports for a LoadBalancer Ingress <cce_10_0937>`.

.. table:: **Table 7** Annotations for a custom listening port

   +--------------------------------+-----------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------+
   | Parameter                      | Type            | Description                                                                                                                                                                                                                                                                                                                                                                                                                                        | Supported Cluster Version                                 |
   +================================+=================+====================================================================================================================================================================================================================================================================================================================================================================================================================================================+===========================================================+
   | kubernetes.io/elb.listen-ports | String          | Create multiple listening ports for an ingress. The port number ranges from 1 to 65535.                                                                                                                                                                                                                                                                                                                                                            | v1.23.14-r0, v1.25.9-r0, v1.27.6-r0, v1.28.4-r0, or later |
   |                                |                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                    |                                                           |
   |                                |                 | The following is an example for JSON characters:                                                                                                                                                                                                                                                                                                                                                                                                   |                                                           |
   |                                |                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                    |                                                           |
   |                                |                 | .. code-block::                                                                                                                                                                                                                                                                                                                                                                                                                                    |                                                           |
   |                                |                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                    |                                                           |
   |                                |                 |    kubernetes.io/elb.listen-ports: '[{"HTTP":80},{"HTTPS":443}]'                                                                                                                                                                                                                                                                                                                                                                                   |                                                           |
   |                                |                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                    |                                                           |
   |                                |                 | -  Only the listening ports that comply with both HTTP and HTTPS are allowed.                                                                                                                                                                                                                                                                                                                                                                      |                                                           |
   |                                |                 | -  This function is available only for newly created ingresses in clusters of a version earlier than v1.23.18-r10, v1.25.16-r0, v1.27.16-r0, v1.28.13-r0, v1.29.8-r0, or v1.30.4-r0. Additionally, after you configure multiple listening ports, the annotations cannot be modified or deleted. In clusters of v1.23.18-r10, v1.25.16-r0, v1.27.16-r0, v1.28.13-r0, v1.29.8-r0, v1.30.4-r0, or later, the annotations can be modified and deleted. |                                                           |
   |                                |                 | -  If both **kubernetes.io/elb.listen-ports** and **kubernetes.io/elb.port** are configured, **kubernetes.io/elb.listen-ports** takes a higher priority.                                                                                                                                                                                                                                                                                           |                                                           |
   |                                |                 | -  Ingress configuration items such as the blocklist, trustlist, and timeout concurrently take effect on multiple listening ports. When HTTP/2 is enabled for an ingress, HTTP/2 takes effect only on the HTTPS port.                                                                                                                                                                                                                              |                                                           |
   +--------------------------------+-----------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------+

.. _cce_10_0695__section2481237579:

Configuring Timeout for an Ingress
----------------------------------

For details about application scenarios and use cases, see :ref:`Configuring Timeout for a LoadBalancer Ingress <cce_10_0730>`.

.. table:: **Table 8** Annotations for configuring timeout of an ingress

   +-------------------------------------+-----------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------+
   | Parameter                           | Type            | Description                                                                                                                                                                                                                                                                        | Supported Cluster Version                                                                |
   +=====================================+=================+====================================================================================================================================================================================================================================================================================+==========================================================================================+
   | kubernetes.io/elb.keepalive_timeout | String          | Timeout for client connections. If there are no requests reaching the load balancer during the timeout duration, the load balancer will disconnect the connection from the client and establish a new connection when there is a new request.                                      | Dedicated load balancers: v1.19.16-r30, v1.21.10-r10, v1.23.8-r10, v1.25.3-r10, or later |
   |                                     |                 |                                                                                                                                                                                                                                                                                    |                                                                                          |
   |                                     |                 | The value ranges from **0** to **4000** (in seconds). The default value is **60**.                                                                                                                                                                                                 | Shared load balancers: v1.23.13-r0, v1.25.8-r0, v1.27.5-r0, v1.28.3-r0, or later         |
   +-------------------------------------+-----------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------+
   | kubernetes.io/elb.client_timeout    | String          | Timeout for waiting for a request from a client. There are two cases:                                                                                                                                                                                                              |                                                                                          |
   |                                     |                 |                                                                                                                                                                                                                                                                                    |                                                                                          |
   |                                     |                 | -  If the client fails to send a request header to the load balancer during the timeout duration, the request will be interrupted.                                                                                                                                                 |                                                                                          |
   |                                     |                 | -  If the interval between two consecutive request bodies reaching the load balancer is greater than the timeout duration, the connection will be disconnected.                                                                                                                    |                                                                                          |
   |                                     |                 |                                                                                                                                                                                                                                                                                    |                                                                                          |
   |                                     |                 | The value ranges from **1** to **300** (in seconds). The default value is **60**.                                                                                                                                                                                                  |                                                                                          |
   +-------------------------------------+-----------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------+
   | kubernetes.io/elb.member_timeout    | String          | Timeout for waiting for a response from a backend server. After a request is forwarded to the backend server, if the backend server does not respond within the duration specified by **member_timeout**, the load balancer will stop waiting and return HTTP 504 Gateway Timeout. |                                                                                          |
   |                                     |                 |                                                                                                                                                                                                                                                                                    |                                                                                          |
   |                                     |                 | The value ranges from **1** to **300** (in seconds). The default value is **60**.                                                                                                                                                                                                  |                                                                                          |
   +-------------------------------------+-----------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------+

.. _cce_10_0695__section24243015135:

Configuring a Slow Start
------------------------

For details about application scenarios and use cases, see :ref:`Configuring a Slow Start for a LoadBalancer Ingress <cce_10_0735>`.

.. table:: **Table 9** Annotations for configuring a slow start

   +-----------------------------+-----------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------------------------+
   | Parameter                   | Type            | Description                                                                                                                                                                                                                                                 | Supported Cluster Version |
   +=============================+=================+=============================================================================================================================================================================================================================================================+===========================+
   | kubernetes.io/elb.slowstart | String          | Duration of slow start, in seconds.                                                                                                                                                                                                                         | v1.23 or later            |
   |                             |                 |                                                                                                                                                                                                                                                             |                           |
   |                             |                 | The slow start duration ranges from 30 to 1200.                                                                                                                                                                                                             |                           |
   |                             |                 |                                                                                                                                                                                                                                                             |                           |
   |                             |                 | -  This configuration applies only to dedicated load balancers.                                                                                                                                                                                             |                           |
   |                             |                 | -  This parameter is valid only when the allocation policy of the target Service is weighted round robin (WRR) and sticky session is disabled.                                                                                                              |                           |
   |                             |                 |                                                                                                                                                                                                                                                             |                           |
   |                             |                 | .. note::                                                                                                                                                                                                                                                   |                           |
   |                             |                 |                                                                                                                                                                                                                                                             |                           |
   |                             |                 |    The load balancer linearly increases the proportion of requests to backend servers in slow start mode. When the configured slow start duration elapses, the load balancer sends full share of requests to backend servers and exits the slow start mode. |                           |
   +-----------------------------+-----------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------------------------+

.. _cce_10_0695__section79480421873:

Blocklist/Trustlist
-------------------

For details about application scenarios and use cases, see :ref:`Configuring a Blocklist/Trustlist Access Policy for a LoadBalancer Ingress <cce_10_0832>`.

.. table:: **Table 10** Annotations for ELB access control

   +------------------------------+-----------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------+
   | Parameter                    | Type            | Description                                                                                                                                                                                                                                                                                                | Supported Cluster Version                                 |
   +==============================+=================+============================================================================================================================================================================================================================================================================================================+===========================================================+
   | kubernetes.io/elb.acl-id     | String          | -  If this parameter is not specified, CCE does not modify access control on the ELB.                                                                                                                                                                                                                      | v1.23.12-r0, v1.25.7-r0, v1.27.4-r0, v1.28.2-r0, or later |
   |                              |                 |                                                                                                                                                                                                                                                                                                            |                                                           |
   |                              |                 | -  If this parameter is left empty, all IP addresses are allowed to access the load balancer.                                                                                                                                                                                                              |                                                           |
   |                              |                 |                                                                                                                                                                                                                                                                                                            |                                                           |
   |                              |                 | -  If this parameter is set to the IP address group ID of the load balancer, access control is enabled and you need to configure an IP address blocklist or trustlist for the load balancer. Additionally, you need to configure both **kubernetes.io/elb.acl-status** and **kubernetes.io/elb.acl-type**. |                                                           |
   |                              |                 |                                                                                                                                                                                                                                                                                                            |                                                           |
   |                              |                 |    .. note::                                                                                                                                                                                                                                                                                               |                                                           |
   |                              |                 |                                                                                                                                                                                                                                                                                                            |                                                           |
   |                              |                 |       For clusters of v1.25.16-r10, v1.27.16-r10, v1.28.15-r0, v1.29.10-r0, v1.30.6-r0, v1.31.1-r0, or later, when using a dedicated load balancer, you can select a maximum of five IP address groups at a time, separated by commas (,).                                                                 |                                                           |
   |                              |                 |                                                                                                                                                                                                                                                                                                            |                                                           |
   |                              |                 |    **How to obtain**:                                                                                                                                                                                                                                                                                      |                                                           |
   |                              |                 |                                                                                                                                                                                                                                                                                                            |                                                           |
   |                              |                 |    Log in to the ELB console, choose **Elastic Load Balance** > **IP Address Groups**, and copy the **ID** of the target IP address group.                                                                                                                                                                 |                                                           |
   +------------------------------+-----------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------+
   | kubernetes.io/elb.acl-status | String          | Access control status. This parameter is mandatory when you configure an IP address blocklist or trustlist for a load balancer. Options:                                                                                                                                                                   | v1.23.12-r0, v1.25.7-r0, v1.27.4-r0, v1.28.2-r0, or later |
   |                              |                 |                                                                                                                                                                                                                                                                                                            |                                                           |
   |                              |                 | -  **on** or **true**: Access control is enabled.                                                                                                                                                                                                                                                          |                                                           |
   |                              |                 | -  **off** or **false**: Access control is disabled.                                                                                                                                                                                                                                                       |                                                           |
   +------------------------------+-----------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------+
   | kubernetes.io/elb.acl-type   | String          | IP address list type. This parameter is mandatory when you configure an IP address blocklist or trustlist for a load balancer. Options:                                                                                                                                                                    | v1.23.12-r0, v1.25.7-r0, v1.27.4-r0, v1.28.2-r0, or later |
   |                              |                 |                                                                                                                                                                                                                                                                                                            |                                                           |
   |                              |                 | -  **black**: indicates a blocklist. The selected IP address group cannot access the load balancer.                                                                                                                                                                                                        |                                                           |
   |                              |                 | -  **white**: indicates a trustlist. Only the selected IP address group can access the load balancer.                                                                                                                                                                                                      |                                                           |
   +------------------------------+-----------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------+

.. _cce_10_0695__section33791154163610:

Configuring the Priorities of Forwarding Rules
----------------------------------------------

When ingresses use the same load balancer listener, forwarding rules can be prioritized based on the following rules:

-  Forwarding rules of different ingresses: The rules are sorted based on the priorities (ranging from 1 to 1000) of the **kubernetes.io/elb.ingress-order** annotation. A smaller value indicates a higher priority.
-  Forwarding rules of an ingress: If the **kubernetes.io/elb.rule-priority-enabled** annotation is set to **true**, the forwarding rules are sorted based on the sequence in which they are added during ingress creation. A forwarding rule added earlier indicates a higher priority. If the **kubernetes.io/elb.rule-priority-enabled** annotation is not configured, the default sorting of the forwarding rules on the load balancer will be used.

If the preceding annotations are not configured, the default sorting of the forwarding rules on the load balancer will be used, regardless of whether the forwarding rules are of the same ingress or different ingresses under the same load balancer listener.

For details about application scenarios and use cases, see :ref:`Configuring the Priorities of Forwarding Rules for LoadBalancer Ingresses <cce_10_0939>`.

.. table:: **Table 11** Annotations for configuring the priorities of forwarding rules

   +-----------------------------------------+-----------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------+
   | Parameter                               | Type            | Description                                                                                                                                                                                                                                                                                  | Supported Cluster Version                                               |
   +=========================================+=================+==============================================================================================================================================================================================================================================================================================+=========================================================================+
   | kubernetes.io/elb.ingress-order         | String          | Specifies the sequence of forwarding rules of different ingresses. The value ranges from 1 to 1000. A smaller value indicates a higher priority. The priority of a forwarding rule must be unique under the same load balancer listener.                                                     | v1.23.15-r0, v1.25.10-r0, v1.27.7-r0, v1.28.5-r0, v1.29.1-r10, or later |
   |                                         |                 |                                                                                                                                                                                                                                                                                              |                                                                         |
   |                                         |                 | This parameter is available only for dedicated load balancers.                                                                                                                                                                                                                               |                                                                         |
   |                                         |                 |                                                                                                                                                                                                                                                                                              |                                                                         |
   |                                         |                 | .. note::                                                                                                                                                                                                                                                                                    |                                                                         |
   |                                         |                 |                                                                                                                                                                                                                                                                                              |                                                                         |
   |                                         |                 |    -  When this annotation is configured, the **kubernetes.io/elb.rule-priority-enabled** annotation is enabled by default. The forwarding rules of each ingress will be sorted.                                                                                                             |                                                                         |
   |                                         |                 |    -  CCE sorts all forwarding policies for a given listener based on the order of the ingresses and the forwarding policy settings within those ingresses. The configured value does not correspond to the priority of the load balancer forwarding policy.                                 |                                                                         |
   +-----------------------------------------+-----------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------+
   | kubernetes.io/elb.rule-priority-enabled | String          | This parameter can only be set to **true**, indicating to sort the forwarding rules of an ingress. The priorities of the forwarding rules are determined based on the sequence in which they are added during ingress creation. A forwarding rule added earlier indicates a higher priority. |                                                                         |
   |                                         |                 |                                                                                                                                                                                                                                                                                              |                                                                         |
   |                                         |                 | If this parameter is not configured, the default sorting of the forwarding rules on the load balancer will be used. After this parameter is enabled, it cannot be disabled.                                                                                                                  |                                                                         |
   |                                         |                 |                                                                                                                                                                                                                                                                                              |                                                                         |
   |                                         |                 | This parameter is available only for dedicated load balancers.                                                                                                                                                                                                                               |                                                                         |
   +-----------------------------------------+-----------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------+

.. _cce_10_0695__section1175174213597:

Configuring a Custom Header Forwarding Policy
---------------------------------------------

For details about application scenarios and use cases, see :ref:`Configuring a Custom Header Forwarding Policy for a LoadBalancer Ingress <cce_10_0896>`.

.. table:: **Table 12** Annotations for configuring a custom header forwarding policy

   +-------------------------------------------+-----------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------+
   | Parameter                                 | Type            | Description                                                                                                                                                                                                                                        | Supported Cluster Version                                              |
   +===========================================+=================+====================================================================================================================================================================================================================================================+========================================================================+
   | kubernetes.io/elb.headers.\ *${svc_name}* | String          | Custom header of the Service associated with an ingress. *${svc_name}* is the Service name.                                                                                                                                                        | v1.23.16-r0, v1.25.11-r0, v1.27.8-r0, v1.28.6-r0, v1.29.2-r0, or later |
   |                                           |                 |                                                                                                                                                                                                                                                    |                                                                        |
   |                                           |                 | Format: a JSON string, for example, {"key": "test", "values": ["value1", "value2"]}                                                                                                                                                                |                                                                        |
   |                                           |                 |                                                                                                                                                                                                                                                    |                                                                        |
   |                                           |                 | -  A key-value pair represents the key and value of a custom header. You can configure up to nine values. However, if a header with the key **host** is specified, only eight values can be configured.                                            |                                                                        |
   |                                           |                 |                                                                                                                                                                                                                                                    |                                                                        |
   |                                           |                 |    Enter 1 to 40 characters for a key. Only letters, digits, hyphens (-), and underscores (_) are allowed.                                                                                                                                         |                                                                        |
   |                                           |                 |                                                                                                                                                                                                                                                    |                                                                        |
   |                                           |                 |    Enter 1 to 128 characters for a value. Asterisks (``*``) and question marks (?) are allowed, but spaces and double quotation marks are not allowed. An asterisk can match zero or more characters, and a question mark can match one character. |                                                                        |
   |                                           |                 |                                                                                                                                                                                                                                                    |                                                                        |
   |                                           |                 | -  Either a custom header or grayscale release can be configured.                                                                                                                                                                                  |                                                                        |
   |                                           |                 |                                                                                                                                                                                                                                                    |                                                                        |
   |                                           |                 | -  Enter 1 to 51 characters for *${svc_name}*.                                                                                                                                                                                                     |                                                                        |
   +-------------------------------------------+-----------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------+

.. _cce_10_0695__section18681184812916:

Configuring Advanced Forwarding Rules
-------------------------------------

For details about application scenarios and use cases, see :ref:`Configuring an Advanced Forwarding Policy for a LoadBalancer Ingress <cce_10_0949>`.

.. table:: **Table 13** Annotations for advanced forwarding rules

   +----------------------------------------------+-----------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------+
   | Parameter                                    | Type            | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                | Supported Cluster Version                                                             |
   +==============================================+=================+============================================================================================================================================================================================================================================================================================================================================================================================================================================================================+=======================================================================================+
   | kubernetes.io/elb.conditions.\ *${svc_name}* | String          | Configure an advanced forwarding rule. *${svc_name}* indicates the Service name, which can contain a maximum of 51 characters.                                                                                                                                                                                                                                                                                                                                             | v1.23.18-r10, v1.25.16-r0, v1.27.16-r0, v1.28.13-r0, v1.29.8-r0, v1.30.4-r0, or later |
   |                                              |                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |                                                                                       |
   |                                              |                 | If the annotation value is set to *[]*, the advanced forwarding rule will be deleted.                                                                                                                                                                                                                                                                                                                                                                                      |                                                                                       |
   |                                              |                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |                                                                                       |
   |                                              |                 | The annotation value is a JSON array. For details, see :ref:`Table 4 <cce_10_0949__en-us_topic_0000002078490189_table18956183913383>`.                                                                                                                                                                                                                                                                                                                                     |                                                                                       |
   |                                              |                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |                                                                                       |
   |                                              |                 | .. important::                                                                                                                                                                                                                                                                                                                                                                                                                                                             |                                                                                       |
   |                                              |                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |                                                                                       |
   |                                              |                 |    NOTICE:                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |                                                                                       |
   |                                              |                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |                                                                                       |
   |                                              |                 |    -  Due to ELB API restrictions, a **kubernetes.io/elb.conditions.**\ *{svcName}* can contain a maximum of 10 key-value pairs.                                                                                                                                                                                                                                                                                                                                           |                                                                                       |
   |                                              |                 |    -  The rules in a condition array are connected by an AND relationship, while the values in the same rule block are connected by an OR relationship. For example, if both Method and QueryString are configured, the target traffic can be distributed only when both rules are met. However, if the Method value includes both **GET** and **POST**, the traffic can be distributed only when both rules are met and the request method is either **GET** or **POST**. |                                                                                       |
   +----------------------------------------------+-----------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------+

.. _cce_10_0695__section19158739164117:

Configuring Advanced Forwarding Actions
---------------------------------------

For details about application scenarios and use cases, see :ref:`Configuring an Advanced Forwarding Policy for a LoadBalancer Ingress <cce_10_0949>`.

.. table:: **Table 14** Annotations for configuring advanced forwarding actions

   +-------------------------------------------+-----------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------+
   | Parameter                                 | Type            | Description                                                                                                                                                   | Supported Cluster Version                                                           |
   +===========================================+=================+===============================================================================================================================================================+=====================================================================================+
   | kubernetes.io/elb.actions.\ *${svc_name}* | String          | Advanced forwarding action of the Service associated with an ingress. *${svc_name}* indicates the Service name, which can contain a maximum of 51 characters. | The forwarding actions supported by clusters vary depending on the cluster version. |
   |                                           |                 |                                                                                                                                                               |                                                                                     |
   |                                           |                 | The annotation value is a JSON array. If it is set to *[]*, the advanced forwarding action will be deleted.                                                   |                                                                                     |
   |                                           |                 |                                                                                                                                                               |                                                                                     |
   |                                           |                 | The following advanced forwarding actions are supported:                                                                                                      |                                                                                     |
   |                                           |                 |                                                                                                                                                               |                                                                                     |
   |                                           |                 | -  :ref:`Return a fixed response <cce_10_0949__section1848134064919>`                                                                                         |                                                                                     |
   |                                           |                 | -  :ref:`Limit traffic <cce_10_0949__section1026923902417>`                                                                                                   |                                                                                     |
   |                                           |                 | -  :ref:`Customize a backend server group <cce_10_0949__section8498141262>`                                                                                   |                                                                                     |
   +-------------------------------------------+-----------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------+

Parameters for Automatically Creating a Load Balancer
-----------------------------------------------------

.. _cce_10_0695__table148341447193017:

.. table:: **Table 15** elb.autocreate data structure

   +-----------------------+---------------------------------------+------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Parameter             | Mandatory                             | Type             | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
   +=======================+=======================================+==================+=============================================================================================================================================================================================================================================================================================================================================================================================================================================================================+
   | name                  | No                                    | String           | Name of the automatically created load balancer.                                                                                                                                                                                                                                                                                                                                                                                                                            |
   |                       |                                       |                  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
   |                       |                                       |                  | The value can contain 1 to 64 characters. Only letters, digits, underscores (_), hyphens (-), and periods (.) are allowed.                                                                                                                                                                                                                                                                                                                                                  |
   |                       |                                       |                  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
   |                       |                                       |                  | Default: **cce-lb+service.UID**                                                                                                                                                                                                                                                                                                                                                                                                                                             |
   +-----------------------+---------------------------------------+------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | type                  | No                                    | String           | Network type of the load balancer.                                                                                                                                                                                                                                                                                                                                                                                                                                          |
   |                       |                                       |                  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
   |                       |                                       |                  | -  **public**: public network load balancer                                                                                                                                                                                                                                                                                                                                                                                                                                 |
   |                       |                                       |                  | -  **inner**: private network load balancer                                                                                                                                                                                                                                                                                                                                                                                                                                 |
   |                       |                                       |                  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
   |                       |                                       |                  | Default: **inner**                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
   +-----------------------+---------------------------------------+------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | bandwidth_name        | Yes for public network load balancers | String           | Bandwidth name. The default value is **cce-bandwidth-**\ ``******``.                                                                                                                                                                                                                                                                                                                                                                                                        |
   |                       |                                       |                  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
   |                       |                                       |                  | The value can contain 1 to 64 characters. Only letters, digits, underscores (_), hyphens (-), and periods (.) are allowed.                                                                                                                                                                                                                                                                                                                                                  |
   +-----------------------+---------------------------------------+------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | bandwidth_chargemode  | Yes for public network load balancers | String           | Bandwidth mode.                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
   |                       |                                       |                  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
   |                       |                                       |                  | -  **traffic**: billed by traffic                                                                                                                                                                                                                                                                                                                                                                                                                                           |
   +-----------------------+---------------------------------------+------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | bandwidth_size        | Yes for public network load balancers | Integer          | Bandwidth size. The value ranges from 1 Mbit/s to 2000 Mbit/s by default. Configure this parameter based on the bandwidth range allowed in your region.                                                                                                                                                                                                                                                                                                                     |
   |                       |                                       |                  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
   |                       |                                       |                  | The minimum increment for bandwidth adjustment varies depending on the bandwidth range.                                                                                                                                                                                                                                                                                                                                                                                     |
   |                       |                                       |                  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
   |                       |                                       |                  | -  The minimum increment is 1 Mbit/s if the allowed bandwidth does not exceed 300 Mbit/s.                                                                                                                                                                                                                                                                                                                                                                                   |
   |                       |                                       |                  | -  The minimum increment is 50 Mbit/s if the allowed bandwidth ranges from 300 Mbit/s to 1000 Mbit/s.                                                                                                                                                                                                                                                                                                                                                                       |
   |                       |                                       |                  | -  The minimum increment is 500 Mbit/s if the allowed bandwidth exceeds 1000 Mbit/s.                                                                                                                                                                                                                                                                                                                                                                                        |
   +-----------------------+---------------------------------------+------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | bandwidth_sharetype   | Yes for public network load balancers | String           | Bandwidth sharing mode.                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
   |                       |                                       |                  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
   |                       |                                       |                  | -  **PER**: dedicated bandwidth                                                                                                                                                                                                                                                                                                                                                                                                                                             |
   +-----------------------+---------------------------------------+------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | eip_type              | Yes for public network load balancers | String           | EIP type.                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
   |                       |                                       |                  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
   |                       |                                       |                  | -  **5_bgp**: dynamic BGP                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
   |                       |                                       |                  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
   |                       |                                       |                  | The types vary by region. For details, see the EIP console.                                                                                                                                                                                                                                                                                                                                                                                                                 |
   +-----------------------+---------------------------------------+------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | vip_subnet_cidr_id    | No                                    | String           | The ID of the IPv4 subnet where the load balancer resides. This subnet is used to allocate IP addresses for the load balancer to provide external services. The IPv4 subnet must belong to the cluster's VPC.                                                                                                                                                                                                                                                               |
   |                       |                                       |                  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
   |                       |                                       |                  | If this parameter is not specified, the load balancer and the cluster will be in the same subnet by default.                                                                                                                                                                                                                                                                                                                                                                |
   |                       |                                       |                  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
   |                       |                                       |                  | This field can be specified only for clusters of v1.21 or later.                                                                                                                                                                                                                                                                                                                                                                                                            |
   |                       |                                       |                  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
   |                       |                                       |                  | **How to obtain**:                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
   |                       |                                       |                  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
   |                       |                                       |                  | Log in to the VPC console. In the navigation pane, choose **Subnets**. Filter the target subnet by the cluster's VPC name, click the subnet name, and copy the **IPv4 Subnet ID** on the **Summary** tab.                                                                                                                                                                                                                                                                   |
   +-----------------------+---------------------------------------+------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | ipv6_vip_virsubnet_id | No                                    | String           | The ID of the IPv6 subnet where the load balancer is deployed. IPv6 must be enabled for the subnet.                                                                                                                                                                                                                                                                                                                                                                         |
   |                       |                                       |                  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
   |                       |                                       |                  | This parameter is available only for dedicated load balancers.                                                                                                                                                                                                                                                                                                                                                                                                              |
   |                       |                                       |                  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
   |                       |                                       |                  | **How to obtain**:                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
   |                       |                                       |                  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
   |                       |                                       |                  | Log in to the VPC console. In the navigation pane, choose **Subnets**. Filter the target subnet by the cluster's VPC name, click the subnet name, and copy the **Network ID** on the **Summary** tab.                                                                                                                                                                                                                                                                       |
   +-----------------------+---------------------------------------+------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | elb_virsubnet_ids     | No                                    | Array of strings | The network ID of the subnet where the load balancer is located. This subnet is used to allocate IP addresses for accessing the backend server. If this parameter is not specified, the subnet specified by **vip_subnet_cidr_id** will be used by default. Load balancers occupy varying numbers of subnet IP addresses based on their specifications. Do not use the subnet CIDR blocks of other resources (such as clusters or nodes) as the load balancer's CIDR block. |
   |                       |                                       |                  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
   |                       |                                       |                  | This parameter is available only for dedicated load balancers.                                                                                                                                                                                                                                                                                                                                                                                                              |
   |                       |                                       |                  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
   |                       |                                       |                  | Example:                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
   |                       |                                       |                  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
   |                       |                                       |                  | .. code-block::                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
   |                       |                                       |                  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
   |                       |                                       |                  |    "elb_virsubnet_ids": [                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
   |                       |                                       |                  |       "14567f27-8ae4-42b8-ae47-9f847a4690dd"                                                                                                                                                                                                                                                                                                                                                                                                                                |
   |                       |                                       |                  |     ]                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
   |                       |                                       |                  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
   |                       |                                       |                  | **How to obtain**:                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
   |                       |                                       |                  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
   |                       |                                       |                  | Log in to the VPC console. In the navigation pane, choose **Subnets**. Filter the target subnet by the cluster's VPC name, click the subnet name, and copy the **Network ID** on the **Summary** tab.                                                                                                                                                                                                                                                                       |
   +-----------------------+---------------------------------------+------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | vip_address           | No                                    | String           | Private IP address of the load balancer. Only IPv4 addresses are supported. IPv6 addresses are not supported.                                                                                                                                                                                                                                                                                                                                                               |
   |                       |                                       |                  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
   |                       |                                       |                  | The IP address must be in the ELB CIDR block. If this parameter is not specified, an IP address will be automatically assigned from the ELB CIDR block.                                                                                                                                                                                                                                                                                                                     |
   |                       |                                       |                  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
   |                       |                                       |                  | This parameter is available only in clusters of v1.23.11-r0, v1.25.6-r0, v1.27.3-r0, or later versions.                                                                                                                                                                                                                                                                                                                                                                     |
   +-----------------------+---------------------------------------+------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | available_zone        | Yes                                   | Array of strings | AZ where the load balancer is located.                                                                                                                                                                                                                                                                                                                                                                                                                                      |
   |                       |                                       |                  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
   |                       |                                       |                  | You can obtain all supported AZs by `getting the AZ list <https://docs.otc.t-systems.com/api/elb/ListAvailabilityZones.html>`__.                                                                                                                                                                                                                                                                                                                                            |
   |                       |                                       |                  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
   |                       |                                       |                  | This parameter is available only for dedicated load balancers.                                                                                                                                                                                                                                                                                                                                                                                                              |
   +-----------------------+---------------------------------------+------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | l4_flavor_name        | No                                    | String           | Flavor name of the Layer 4 load balancer. This parameter is mandatory when TCP or UDP is used.                                                                                                                                                                                                                                                                                                                                                                              |
   |                       |                                       |                  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
   |                       |                                       |                  | You can obtain all supported types by `getting the flavor list <https://docs.otc.t-systems.com/api/elb/ListFlavors.html>`__.                                                                                                                                                                                                                                                                                                                                                |
   |                       |                                       |                  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
   |                       |                                       |                  | This parameter is available only for dedicated load balancers.                                                                                                                                                                                                                                                                                                                                                                                                              |
   +-----------------------+---------------------------------------+------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | l7_flavor_name        | No                                    | String           | Flavor name of the Layer 7 load balancer. This parameter is mandatory when HTTP is used.                                                                                                                                                                                                                                                                                                                                                                                    |
   |                       |                                       |                  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
   |                       |                                       |                  | You can obtain all supported types by `getting the flavor list <https://docs.otc.t-systems.com/api/elb/ListFlavors.html>`__.                                                                                                                                                                                                                                                                                                                                                |
   |                       |                                       |                  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
   |                       |                                       |                  | This parameter is available only for dedicated load balancers. Its value must match that of **l4_flavor_name**, both of which must be either elastic flavors or fixed flavors.                                                                                                                                                                                                                                                                                              |
   +-----------------------+---------------------------------------+------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
