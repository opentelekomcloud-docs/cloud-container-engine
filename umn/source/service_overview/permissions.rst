:original_name: cce_productdesc_0002.html

.. _cce_productdesc_0002:

Permissions
===========

CCE allows you to assign permissions to IAM users and user groups under your tenant accounts. CCE combines the advantages of Identity and Access Management (IAM) and Kubernetes Role-based Access Control (RBAC) to provide a variety of authorization methods, including IAM fine-grained/token authorization and cluster-/namespace-scoped authorization.

CCE permissions are described as follows:

-  :ref:`Cluster-level permissions <cce_productdesc_0002__en-us_topic_0000001550245829_section14734188>`: Cluster-level permissions management evolves out of the system policy authorization feature of IAM. IAM users in the same user group have the same permissions. On IAM, you can configure system policies to describe which IAM user groups can perform which operations on cluster resources. For example, you can grant user group A to create and delete cluster X, add a node, or install an add-on, while granting user group B to view information about cluster X.

   Cluster-level permissions involve CCE non-Kubernetes APIs and support fine-grained IAM policies and enterprise project management capabilities.

-  :ref:`Namespace-level permissions <cce_productdesc_0002__en-us_topic_0000001550245829_section54736241399>`: You can regulate users' or user groups' access to **Kubernetes resources**, such as workloads, jobs, and Services, in a single namespace based on their Kubernetes RBAC roles. CCE has also been enhanced based on open-source capabilities. It supports RBAC authorization based on IAM user or user group, and RBAC authentication on access to APIs using IAM tokens.

   Namespace-level permissions involve CCE Kubernetes APIs and are enhanced based on the Kubernetes RBAC capabilities. Namespace-level permissions can be granted to IAM users or user groups for authentication and authorization, but are independent of fine-grained IAM policies. For details, see `Using RBAC Authorization <https://kubernetes.io/docs/reference/access-authn-authz/rbac/>`__.

.. caution::

   -  **Cluster-level permissions** are configured only for cluster-related resources (such as clusters and nodes). You must also configure :ref:`namespace permissions <cce_productdesc_0002__en-us_topic_0000001550245829_section54736241399>` to operate Kubernetes resources (such as workloads, jobs, and Services).
   -  After you create a cluster of v1.11.7-r2 or later, CCE automatically assigns the cluster-admin permissions of all namespaces in the cluster to you, which means you have full control on the cluster and all resources in all namespaces.

.. _cce_productdesc_0002__en-us_topic_0000001550245829_section14734188:

Cluster-level Permissions (Assigned by Using IAM System Policies)
-----------------------------------------------------------------

By default, new IAM users do not have permissions assigned. You need to add a user to one or more groups, and attach permissions policies or roles to these groups. Users inherit permissions from the groups to which they are added and can perform specified operations on cloud services based on the permissions.

CCE is a project-level service deployed and accessed in specific physical regions. To assign AOM permissions to a user group, specify the scope as region-specific projects and select projects for the permissions to take effect. If **All projects** is selected, the permissions will take effect for the user group in all region-specific projects. When accessing CCE, the users need to switch to a region where they have been authorized to use the CCE service.

You can grant users permissions by using roles and policies.

-  Roles: A type of coarse-grained authorization mechanism that defines permissions related to user responsibilities. This mechanism provides only a limited number of service-level roles for authorization. When using roles to assign permissions, you need to also assign other roles on which the permissions depend to take effect. However, roles are not an ideal choice for fine-grained authorization and secure access control.
-  Policies: A type of fine-grained authorization mechanism that defines permissions required to perform operations on specific cloud resources under certain conditions. This mechanism allows for more flexible policy-based authorization, meeting requirements for secure access control. For example, you can assign users only the permissions for managing a certain type of clusters and nodes.

:ref:`Table 1 <cce_productdesc_0002__en-us_topic_0000001550245829_table9857780>` lists all the system permissions supported by CCE.

.. _cce_productdesc_0002__en-us_topic_0000001550245829_table9857780:

.. table:: **Table 1** System permissions supported by CCE

   +--------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------+---------------------------------------------------------------------------------------------------------------------------------------+
   | Role/Policy Name   | Description                                                                                                                                                                                                                                                   | Type            | Dependencies                                                                                                                          |
   +====================+===============================================================================================================================================================================================================================================================+=================+=======================================================================================================================================+
   | CCE Administrator  | Read and write permissions for CCE clusters and all resources (including workloads, nodes, jobs, and Services) in the clusters                                                                                                                                | Role            | Users granted permissions of this policy must also be granted permissions of the following policies:                                  |
   |                    |                                                                                                                                                                                                                                                               |                 |                                                                                                                                       |
   |                    |                                                                                                                                                                                                                                                               |                 | **Global service project**: OBS Buckets Viewer and OBS Administrator                                                                  |
   |                    |                                                                                                                                                                                                                                                               |                 |                                                                                                                                       |
   |                    |                                                                                                                                                                                                                                                               |                 | **Region-specific projects**: Tenant Guest, Server Administrator, ELB Administrator, SFS Administrator, SWR Admin, and APM FullAccess |
   |                    |                                                                                                                                                                                                                                                               |                 |                                                                                                                                       |
   |                    |                                                                                                                                                                                                                                                               |                 | .. note::                                                                                                                             |
   |                    |                                                                                                                                                                                                                                                               |                 |                                                                                                                                       |
   |                    |                                                                                                                                                                                                                                                               |                 |    Users with both **CCE Administrator** and **NAT Gateway Administrator** policies can use NAT Gateway functions for clusters.       |
   +--------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------+---------------------------------------------------------------------------------------------------------------------------------------+
   | CCE FullAccess     | Common operation permissions on CCE cluster resources, excluding the namespace-level permissions for the clusters (with Kubernetes RBAC enabled) and the privileged administrator operations, such as agency configuration and cluster certificate generation | Policy          | None.                                                                                                                                 |
   +--------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------+---------------------------------------------------------------------------------------------------------------------------------------+
   | CCE ReadOnlyAccess | Permissions to view CCE cluster resources, excluding the namespace-level permissions of the clusters (with Kubernetes RBAC enabled)                                                                                                                           | Policy          | None.                                                                                                                                 |
   +--------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------+---------------------------------------------------------------------------------------------------------------------------------------+

.. table:: **Table 2** Common operations supported by CCE system policies

   +------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------+------------------------------+-------------------+
   | Operation                                                                                                                                                                    | CCE ReadOnlyAccess           | CCE FullAccess               | CCE Administrator |
   +==============================================================================================================================================================================+==============================+==============================+===================+
   | Creating a cluster                                                                                                                                                           | x                            | Y                            | Y                 |
   +------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------+------------------------------+-------------------+
   | Deleting a cluster                                                                                                                                                           | x                            | Y                            | Y                 |
   +------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------+------------------------------+-------------------+
   | Updating a cluster, for example, updating cluster node scheduling parameters and providing RBAC support to clusters                                                          | x                            | Y                            | Y                 |
   +------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------+------------------------------+-------------------+
   | Upgrading a cluster                                                                                                                                                          | x                            | Y                            | Y                 |
   +------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------+------------------------------+-------------------+
   | Waking up a cluster                                                                                                                                                          | x                            | Y                            | Y                 |
   +------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------+------------------------------+-------------------+
   | Hibernating a cluster                                                                                                                                                        | x                            | Y                            | Y                 |
   +------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------+------------------------------+-------------------+
   | Listing all clusters                                                                                                                                                         | Y                            | Y                            | Y                 |
   +------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------+------------------------------+-------------------+
   | Querying cluster details                                                                                                                                                     | Y                            | Y                            | Y                 |
   +------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------+------------------------------+-------------------+
   | Adding a node                                                                                                                                                                | x                            | Y                            | Y                 |
   +------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------+------------------------------+-------------------+
   | Deleting one or more nodes                                                                                                                                                   | x                            | Y                            | Y                 |
   +------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------+------------------------------+-------------------+
   | Updating a cluster node, for example, updating the node name                                                                                                                 | x                            | Y                            | Y                 |
   +------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------+------------------------------+-------------------+
   | Querying node details                                                                                                                                                        | Y                            | Y                            | Y                 |
   +------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------+------------------------------+-------------------+
   | Listing all nodes                                                                                                                                                            | Y                            | Y                            | Y                 |
   +------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------+------------------------------+-------------------+
   | Listing all jobs                                                                                                                                                             | Y                            | Y                            | Y                 |
   +------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------+------------------------------+-------------------+
   | Deleting one or more cluster jobs                                                                                                                                            | x                            | Y                            | Y                 |
   +------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------+------------------------------+-------------------+
   | Querying job details                                                                                                                                                         | Y                            | Y                            | Y                 |
   +------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------+------------------------------+-------------------+
   | Creating a storage volume                                                                                                                                                    | x                            | Y                            | Y                 |
   +------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------+------------------------------+-------------------+
   | Deleting a storage volume                                                                                                                                                    | x                            | Y                            | Y                 |
   +------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------+------------------------------+-------------------+
   | Performing operations on all Kubernetes resources                                                                                                                            | Y (Kubernetes RBAC required) | Y (Kubernetes RBAC required) | Y                 |
   +------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------+------------------------------+-------------------+
   | Performing all operations on an Elastic Cloud Server (ECS)                                                                                                                   | x                            | Y                            | Y                 |
   +------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------+------------------------------+-------------------+
   | Performing all operations on Elastic Volume Service (EVS) disks                                                                                                              | x                            | Y                            | Y                 |
   |                                                                                                                                                                              |                              |                              |                   |
   | EVS disks can be attached to cloud servers and scaled to a higher capacity whenever needed.                                                                                  |                              |                              |                   |
   +------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------+------------------------------+-------------------+
   | Performing all operations on VPC                                                                                                                                             | x                            | Y                            | Y                 |
   |                                                                                                                                                                              |                              |                              |                   |
   | A cluster must run in a VPC. When creating a namespace, you need to create or associate a VPC for the namespace so that all containers in the namespace will run in the VPC. |                              |                              |                   |
   +------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------+------------------------------+-------------------+
   | Viewing details of all resources on an ECS                                                                                                                                   | Y                            | Y                            | Y                 |
   |                                                                                                                                                                              |                              |                              |                   |
   | In CCE, a node is an ECS with multiple EVS disks.                                                                                                                            |                              |                              |                   |
   +------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------+------------------------------+-------------------+
   | Listing all resources on an ECS                                                                                                                                              | Y                            | Y                            | Y                 |
   +------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------+------------------------------+-------------------+
   | Viewing details about all EVS disk resources EVS disks can be attached to cloud servers and scaled to a higher capacity whenever needed.                                     | Y                            | Y                            | Y                 |
   +------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------+------------------------------+-------------------+
   | Listing all EVS resources                                                                                                                                                    | Y                            | Y                            | Y                 |
   +------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------+------------------------------+-------------------+
   | Viewing details about all VPC resources                                                                                                                                      | Y                            | Y                            | Y                 |
   |                                                                                                                                                                              |                              |                              |                   |
   | A cluster must run in a VPC. When creating a namespace, you need to create or associate a VPC for the namespace so that all containers in the namespace will run in the VPC. |                              |                              |                   |
   +------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------+------------------------------+-------------------+
   | Listing all VPC resources                                                                                                                                                    | Y                            | Y                            | Y                 |
   +------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------+------------------------------+-------------------+
   | Viewing details about all Elastic Load Balance (ELB) resources                                                                                                               | x                            | x                            | Y                 |
   +------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------+------------------------------+-------------------+
   | Listing all ELB resources                                                                                                                                                    | x                            | x                            | Y                 |
   +------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------+------------------------------+-------------------+
   | Viewing Scalable File Service (SFS) resource details                                                                                                                         | Y                            | Y                            | Y                 |
   +------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------+------------------------------+-------------------+
   | Listing all SFS resources                                                                                                                                                    | Y                            | Y                            | Y                 |
   +------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------+------------------------------+-------------------+
   | Viewing Application Operations Management (AOM) resource details                                                                                                             | Y                            | Y                            | Y                 |
   +------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------+------------------------------+-------------------+
   | Listing AOM resources                                                                                                                                                        | Y                            | Y                            | Y                 |
   +------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------+------------------------------+-------------------+
   | Performing all operations on AOM auto scaling rules                                                                                                                          | Y                            | Y                            | Y                 |
   +------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------------------+------------------------------+-------------------+

.. _cce_productdesc_0002__en-us_topic_0000001550245829_section54736241399:

Namespace-level Permissions (Assigned by Using Kubernetes RBAC)
---------------------------------------------------------------

You can regulate users' or user groups' access to Kubernetes resources in a single namespace based on their Kubernetes RBAC roles. The RBAC API declares four kinds of Kubernetes objects: Role, ClusterRole, RoleBinding, and ClusterRoleBinding, which are described as follows:

-  Role: defines a set of rules for accessing Kubernetes resources in a namespace.
-  RoleBinding: defines the relationship between users and roles.
-  ClusterRole: defines a set of rules for accessing Kubernetes resources in a cluster (including all namespaces).
-  ClusterRoleBinding: defines the relationship between users and cluster roles.

Role and ClusterRole specify actions that can be performed on specific resources. RoleBinding and ClusterRoleBinding bind roles to specific users, user groups, or ServiceAccounts. See the following figure.


.. figure:: /_static/images/en-us_image_0261301557.png
   :alt: **Figure 1** Role binding

   **Figure 1** Role binding

On the CCE console, you can assign permissions to a user or user group to access resources in one or all namespaces. By default, the CCE console provides the following ClusterRoles:

-  view (read-only): read-only permission on most resources in all or selected namespaces.
-  edit (development): read and write permissions on most resources in all or selected namespaces. If this ClusterRole is configured for all namespaces, its capability is the same as the O&M permission.
-  admin (O&M): read and write permissions on most resources in all namespaces, and read-only permission on nodes, storage volumes, namespaces, and quota management.
-  cluster-admin (administrator): read and write permissions on all resources in all namespaces.
-  drainage-editor: drain a node.
-  drainage-viewer: view the nodal drainage status but cannot drain a node.

In addition to cluster-admin, admin, edit, and view, you can define Roles and RoleBindings to configure the permissions to add, delete, modify, and query resources, such as pods, Deployments, and Services, in the namespace.
