:original_name: cce_10_0190.html

.. _cce_10_0190:

Permission Dependency of the CCE Console
========================================

Some CCE permissions policies depend on the policies of other cloud services. To view or use other cloud resources on the CCE console, enable the access control feature of IAM and assign dependency policies for the other cloud services.

-  Dependency policies are assigned based on the CCE FullAccess or CCE ReadOnlyAccess policy you configure.
-  Only users and user groups with namespace permissions can gain the view access to resources in clusters.

   -  If a user is granted the view access to all namespaces of a cluster, the user can view all namespace resources (except secrets) in the cluster. To view secrets in the cluster, the user must gain the **admin** or **edit** role in all namespaces of the cluster.
   -  The **view** role within a single namespace allows users to view resources only in the specified namespace.

Dependency Policy Configuration
-------------------------------

To grant an IAM user the permissions to view or use resources of other cloud services on the CCE console, you must first grant the CCE Administrator, CCE FullAccess, or CCE ReadOnlyAccess policy to the user group to which the user belongs and then grant the dependency policies listed in :ref:`Table 1 <cce_10_0190__table99001215575>` to the user. These dependency policies will allow the IAM user to access resources of other cloud services.

.. note::

   **Enterprise projects** can group and manage resources across different projects of an enterprise. Resources are thereby isolated. IAM allows you to implement fine-grained authorization. It is strongly recommended that you use IAM for permissions management.

   If you use an enterprise project to set permissions for IAM users, the following restrictions apply:

   -  On the CCE console, enterprise projects cannot call the API used to obtain AOM monitoring data for cluster monitoring. Therefore, IAM users in these enterprise projects cannot query monitoring data.
   -  On the CCE console, enterprise projects cannot call the API to query the key pair created during node creation. Therefore, IAM users in these enterprise projects cannot use the key pair login mode. Only the password login mode is supported.
   -  On the CCE console, enterprise projects are not supported during template creation. Therefore, enterprise project sub-users cannot use template management.
   -  On the CCE console, the EVS disk query API does not support enterprise projects. Therefore, enterprise project IAM users cannot use existing EVS disks to create PVs. To use this function, add the fine-grained permissions such as evs:volumes:get to the IAM users.

   CCE supports fine-grained permissions configuration, but has the following restrictions:

   -  AOM does not support resource-level monitoring. After operation permissions on specific resources are configured using IAM's fine-grained cluster resource management function, IAM users can view cluster monitoring information on the **Dashboard** page of the CCE console, but cannot view the data on non-fine-grained metrics.

.. _cce_10_0190__table99001215575:

.. table:: **Table 1** Dependency policies

   +-------------------------------------+------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Console Function                    | Dependent Services                       | Roles or Policies Required                                                                                                                                                                                                                                          |
   +=====================================+==========================================+=====================================================================================================================================================================================================================================================================+
   | Cluster overview                    | Application Operations Management (AOM)  | -  An IAM user with the CCE Administrator permission assigned can use this function only after the AOM FullAccess permission is assigned.                                                                                                                           |
   |                                     |                                          | -  IAM users with IAM ReadOnlyAccess, CCE FullAccess, or CCE ReadOnlyAccess assigned can directly use this function.                                                                                                                                                |
   +-------------------------------------+------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Workload management                 | Elastic Load Balance (ELB)               | Except in the following cases, the user does not require any additional role to create workloads.                                                                                                                                                                   |
   |                                     |                                          |                                                                                                                                                                                                                                                                     |
   |                                     | Application Performance Management (APM) | -  To create a Service using ELB, you must have the ELB FullAccess or ELB Administrator plus VPC Administrator permissions assigned.                                                                                                                                |
   |                                     |                                          | -  To use a Java probe, you must have the AOM FullAccess and APM FullAccess permissions assigned.                                                                                                                                                                   |
   |                                     | Application Operations Management (AOM)  | -  To create a Service using NAT Gateway, you must have the NAT Gateway Administrator permission assigned.                                                                                                                                                          |
   |                                     |                                          | -  To use OBS, you must have the OBS Administrator permission globally assigned.                                                                                                                                                                                    |
   |                                     | NAT Gateway                              |                                                                                                                                                                                                                                                                     |
   |                                     |                                          |    .. note::                                                                                                                                                                                                                                                        |
   |                                     | Object Storage Service (OBS)             |                                                                                                                                                                                                                                                                     |
   |                                     |                                          |       Because of the cache, it takes about 13 minutes for the RBAC policy to take effect after being granted to users, enterprise projects, and user groups. After an OBS-related system policy is granted, it takes about 5 minutes for the policy to take effect. |
   |                                     | Scalable File Service (SFS)              |                                                                                                                                                                                                                                                                     |
   |                                     |                                          | -  To use SFS, you must have the SFS FullAccess permission assigned.                                                                                                                                                                                                |
   +-------------------------------------+------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Cluster management                  | Application Operations Management (AOM)  | -  Auto scale-out or scale-up requires the AOM FullAccess policy.                                                                                                                                                                                                   |
   +-------------------------------------+------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Node management                     | Elastic Cloud Server (ECS)               | If the permission assigned to an IAM user is CCE Administrator, creating or deleting a node requires the ECS FullAccess or ECS Administrator policy and the VPC Administrator policy.                                                                               |
   +-------------------------------------+------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Service                             | Elastic Load Balance (ELB)               | Except in the following cases, the user does not require any additional role to create a Service.                                                                                                                                                                   |
   |                                     |                                          |                                                                                                                                                                                                                                                                     |
   |                                     | NAT Gateway                              | -  To create a Service using ELB, you must have the ELB FullAccess or ELB Administrator plus VPC Administrator permissions assigned.                                                                                                                                |
   |                                     |                                          | -  To create a Service using NAT Gateway, you must have the NAT Administrator permission assigned.                                                                                                                                                                  |
   +-------------------------------------+------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Storage                             | Object Storage Service (OBS)             | -  To use OBS, you must have the OBS Administrator permission globally assigned.                                                                                                                                                                                    |
   |                                     |                                          |                                                                                                                                                                                                                                                                     |
   |                                     | Scalable File Service (SFS)              |    .. note::                                                                                                                                                                                                                                                        |
   |                                     |                                          |                                                                                                                                                                                                                                                                     |
   |                                     | SFS Turbo                                |       Because of the cache, it takes about 13 minutes for the RBAC policy to take effect after being granted to users, enterprise projects, and user groups. After an OBS-related system policy is granted, it takes about 5 minutes for the policy to take effect. |
   |                                     |                                          |                                                                                                                                                                                                                                                                     |
   |                                     |                                          | -  To use SFS, you must have the SFS FullAccess permission assigned.                                                                                                                                                                                                |
   |                                     |                                          | -  Using SFS Turbo requires the SFS Turbo FullAccess role.                                                                                                                                                                                                          |
   |                                     |                                          |                                                                                                                                                                                                                                                                     |
   |                                     |                                          | The CCE Administrator role is required for importing storage devices.                                                                                                                                                                                               |
   +-------------------------------------+------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Namespace management                | /                                        | /                                                                                                                                                                                                                                                                   |
   +-------------------------------------+------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Chart management                    | /                                        | Cloud accounts and the IAM users with CCE Administrator assigned can use this function.                                                                                                                                                                             |
   +-------------------------------------+------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Add-ons                             | /                                        | Cloud accounts and the IAM users with CCE Administrator, CCE FullAccess, or CCE ReadOnlyAccess assigned can use this function.                                                                                                                                      |
   +-------------------------------------+------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Permissions management              | /                                        | -  For cloud accounts, no additional policy/role is required.                                                                                                                                                                                                       |
   |                                     |                                          | -  IAM users with the CCE Administrator or global Security Administrator permission assigned can use this function.                                                                                                                                                 |
   |                                     |                                          | -  IAM users with the CCE FullAccess or CCE ReadOnlyAccess permission can access the namespace. In addition, the IAM users must have the :ref:`administrator permissions (cluster-admin) <cce_10_0189__section914518255314>` on the namespace.                      |
   +-------------------------------------+------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | ConfigMaps and Secrets              | /                                        | -  Creating ConfigMaps does not require any additional policy.                                                                                                                                                                                                      |
   |                                     |                                          | -  Viewing secrets requires that the cluster-admin, admin, or edit permission be configured for the namespace. The DEW KeypairFullAccess or DEW KeypairReadOnlyAccess policy must be assigned for dependent services.                                               |
   +-------------------------------------+------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Help center                         | /                                        | /                                                                                                                                                                                                                                                                   |
   +-------------------------------------+------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Switching to other related services | Software Repository for Container (SWR)  | The CCE console provides links to other related services. To view or use these services, an IAM user must be assigned required permissions for the services.                                                                                                        |
   +-------------------------------------+------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
